<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>jQuery AJAX Middleware Test Suite</title>
<link rel="stylesheet" href="../components/qunit/qunit.css" media="screen">
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture"></div>

<script type="text/javascript" src="../components/qunit/qunit.js"></script>
<script type="text/javascript" src="../libs/requirejs/require.js"></script>

<script type="text/javascript">
(function() {
    /*global
    window: false,
    require: true, define: true
    */
    'use strict';

    var JQUERY_URL = (function(defaultVersion) {
        'use strict';

        var params = window.location.search;
        var match = params.match(/[?&]jquery=([^\?&]*)/);
        var version = match && match[1] || defaultVersion;
        return 'libs/jquery/jquery-' + version + '.js';
    }('1.9.1'));

    define('jquery-url', [], function() {
        return JQUERY_URL;
    });

    require.config({
        baseUrl: '../',
        paths: {
            jquery: /^(.*)\.js$/.exec(JQUERY_URL)[1],
            ajaxmiddleware: 'src/jquery-ajaxmiddleware'
        },
        shim: {
            jquery: {
                exports: '$',
                init: function() {
                    return window.$.noConflict(true);
                }
            }
        }
    });

    QUnit.config.autostart = false;
    require(['test/tests'], function() {
        QUnit.start();
    });
}());
</script>
</body>
</html>
