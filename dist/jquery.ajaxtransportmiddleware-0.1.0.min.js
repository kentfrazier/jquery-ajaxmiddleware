/*!
 * jQuery AJAX Transport Middleware - v0.1.0 - 2013-02-28
 * https://github.com/kentfrazier/jquery-ajaxtransportmiddleware
 * Copyright (c) 2013 Kent Frazier; Licensed MIT
 */

(function(t,n){"use strict";"function"==typeof define&&define.amd?(define("_windowGlobal",[],function(){return n}),define(["jquery","_windowGlobal"],t)):t(jQuery,n)})(function(t,n,e){"use strict";function r(n){return function(r,o,i){return n._active&&(t.extend(!0,r,{_ajaxTransportMiddleware:{}}),!r._ajaxTransportMiddleware[n._id])?(r._ajaxTransportMiddleware[n._id]=!0,n.options.filter(r,o,i)?n.options.name:e):e}}function o(r){return function(o,i){function a(o,a){o=r.options.modifyHeaders(o),a=r.options.modifyCompleteCallback(a);var s={dataType:"text",converters:{"* text":n.String},global:!1,headers:o,statusCode:e,success:e,error:e,complete:function(t,n){a(t.status,n,{text:t.responseText},t.getAllResponseHeaders())}},l=t.extend(!0,{},i,s);u=jQuery.ajax(l)}function s(){u&&u.abort()}var u;return{send:a,abort:s}}}function i(n){t.ajaxPrefilter(n.dataTypes,r(n)),t.ajaxTransport(n.options.name,o(n))}function a(t){return new a.prototype._Constructor(t)}var s={},u=function(t){return function(){var n=""+t;return++t,n}}(t.now());return a.prototype={uninstall:function(){},_Constructor:function(n){this.options=t.extend(!0,{},a.DEFAULT_OPTIONS,n),this._id=u(),this._active=!0,this.uninstall=t.proxy(function(){this._active=!1},this),i(this)}},t.extend(a,{DEFAULT_OPTIONS:{name:null,dataTypes:"*",filter:function(){return!0},beforeSend:null,completeWrapper:null,afterSend:null,beforeAbort:null,afterAbort:null},uninstallMiddleware:function(n){if(n instanceof a)n.uninstall();else if(n instanceof String){var e=t.trim(n).split(/\s+/g);t.each(e,function(t,n){var e=s[n]||[];a.uninstallMiddleware(e)})}else t.isArray(n)&&t.each(n,function(t,n){a.uninstallMiddleware(n)})}}),a.prototype._Constructor.prototype=a.prototype,t.ajaxTransportMiddleware=a,a},this);