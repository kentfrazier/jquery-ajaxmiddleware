/*!
 * jQuery AJAX Transport Middleware - v0.1.0 - 2013-02-28
 * https://github.com/kentfrazier/jquery-ajaxtransportmiddleware
 * Copyright (c) 2013 Kent Frazier; Licensed MIT
 */

(function(t,n){"use strict";"function"==typeof define&&define.amd?(define("_windowGlobal",[],function(){return n}),define(["jquery","_windowGlobal"],t)):t(jQuery,n)})(function(t,n,e){"use strict";function i(n){return function(i,r,a){return n._active&&(t.extend(!0,i,{_ajaxTransportMiddleware:{}}),!i._ajaxTransportMiddleware[n._id])?(i._ajaxTransportMiddleware[n._id]=!0,n.options.filter(i,r,a)?n.options.name:e):e}}function r(i){return function(r,a){function o(r,o){r=i.options.modifyHeaders(r),o=i.options.modifyCompleteCallback(o);var s={dataType:"text",converters:{"* text":n.String},global:!1,headers:r,statusCode:e,success:e,error:e,complete:function(t,n){o(t.status,n,{text:t.responseText},t.getAllResponseHeaders())}},d=t.extend(!0,{},a,s);u=jQuery.ajax(d)}function s(){u&&u.abort()}var u;return{send:o,abort:s}}}function a(n){this.options=t.extend(!0,{},s.DEFAULT_OPTIONS,n),this._id=d(),this.activate()}function o(n){u.add(n),t.ajaxPrefilter(n.dataTypes,i(n)),t.ajaxTransport(n.options.name,r(n))}function s(t){return new a(t)}var u={ids:{},names:{},add:t.proxy(function(t){var n=t._id,e=t.options.name;this.ids[n]=t,this.names[e]=this.names[e]||[],this.names[e].push(t)},u)},d=function(t){return function(){var n=""+t;return++t,n}}(t.now());return s.prototype={activate:function(){this._active=!0,this._id in u.ids||o(this)},deactivate:function(){this._active=!1},isActive:function(){return this._active},toString:function(){return["<ajaxTransportMiddleware: ",this.options.name,", ",this._id,">"].join("")}},t.extend(s,{DEFAULT_OPTIONS:{name:null,dataTypes:"*",filter:function(){return!0}},getByName:function(n,e){var i=u.names[n]||[];return t.grep(i,function(t){return e||t._active})}}),a.prototype=s.prototype,t.ajaxTransportMiddleware=s,s},this);